/* Game page specific styles */

:root{
  /* Default to the largest preferred letter size */
  --tile-font-scale: 1.3;
}

.middle{ display:flex; flex-direction:column; gap:8px; min-height:0; flex:1; }
.boardWrap{ flex:1; display:flex; align-items:center; justify-content:center; min-height:0; position:relative; }

.grid{
  display:grid; gap:var(--gap);
  background:linear-gradient(180deg, #0c0d11, #0d1016);
  padding:12px; border-radius:16px; border:1px solid #1e2230;
  box-shadow: 0 10px 30px rgba(0,0,0,.35), inset 0 1px 0 rgba(255,255,255,.02);
  width:100%; height:100%; /* will be sized square via JS */
}

.tile{
  position:relative; aspect-ratio:1/1; border-radius:12px; border:1px solid #242a39;
  background:var(--tile);
  display:flex; align-items:center; justify-content:center; user-select:none;
  font-weight:800; font-size:calc(var(--tile-font-scale, 1) * clamp(19px, 5vw, 34px)); letter-spacing:.02em;
  transition: transform .05s ease, background .15s ease, box-shadow .15s ease;
  touch-action:manipulation;
  overflow:hidden; /* contain fill bar within rounded corners */
}
.tile:hover{ background:var(--tile-hover) }
.tile.selected{
  /* Neon selection ring matching header text color (var(--blink)) */
  box-shadow:
    0 0 0 6px rgba(245, 158, 11, 0.85),
    0 0 18px rgba(245, 158, 11, 0.60);
  transform: translateY(-1px);
}

/* Fill method visuals */
.fillBar{
  position:absolute;
  left:0; right:0; bottom:0;
  height:0%;
  /* Static light green tint (slightly more transparent) */
  background: rgba(16, 185, 129, .20);
  transition: height .18s ease;
  pointer-events:none;
}

.tile .letter{
  position:relative; z-index:1; /* above fill bar */
}

.blink::after{
  content:""; position:absolute; inset:0; border-radius:12px;
  border:2px dashed var(--blink); animation: blink 0.6s linear infinite;
}
@keyframes blink{ 0%{opacity:.15} 50%{opacity:1} 100%{opacity:.15} }

/* Spawn clock overlay for next-target tiles */
.spawnClock{
  position:absolute;
  inset:0;
  border-radius:12px;
  pointer-events:none;
  /* trailing wedge from 0deg to var(--spawn-deg) in a faint yellow/orange */
  background: conic-gradient(
    color-mix(in srgb, var(--blink) 45%, transparent) 0 var(--spawn-deg, 0deg),
    transparent var(--spawn-deg, 0deg) 360deg
  );
  opacity:.35; /* overall softness */
}
.spawnClock::after{
  content:"";
  position:absolute;
  left:50%; top:50%;
  width:2px; height:42%;
  background: var(--blink);
  border-radius:2px;
  transform-origin: bottom center;
  transform: translate(-50%, -100%) rotate(var(--spawn-deg, 0deg));
  /* subtle glow for the hand */
  box-shadow: 0 0 6px rgba(245, 158, 11, .6);
}

/* Under-grid action bar */
.underBar{
  display:flex; gap:8px; align-items:center; justify-content:center; flex-wrap:wrap;
  margin-bottom: clamp(16px, 4vw, 28px);
}
.wordbar{
  flex:1; min-width:240px;
  background:#11131a; border:1px solid #222733; border-radius:12px; padding:10px 12px; display:flex; gap:10px; align-items:center; justify-content:space-between;
}
.wordbar .label{ color:var(--muted); font-size:12px }
.wordbar .letters{ font-weight:800; letter-spacing:.06em; white-space:nowrap; overflow:hidden; text-overflow:ellipsis }
.wordbar .pts{ color:var(--muted) }

/* Game page footer extras */
.note{ display:block; margin-top:2px }

/* Responsive layout assist for board sizing context elements */
.layout-measure{
  /* Helper class if needed for measuring available width */
}

/* Split actions below board (Clear | Submit) */
.submitSplit{
  display:flex;
  gap:8px;
  align-items:stretch;
  width:100%;
}
.splitBtn{
  flex:1 1 0;
  padding:16px 18px;
  font-size:18px;
}

/* Header word pill auto-shrink support */
.wordPill .autoShrink{
  display:inline-block;
  max-width:70vw;
  overflow:hidden;
  text-overflow:ellipsis;
  white-space:nowrap;
  vertical-align:middle;
}

/* Header word text styling */
.wordText{
  color: var(--blink);
  font-weight: 800;
  line-height: 1;
  letter-spacing: .02em;
}

/* Brand header (shows "Letter Stacks" when no letters are selected) */
.brandHeader{
  display:inline-block;
  font-weight: 800;
  line-height: 1.05;
  letter-spacing: .02em;
  background: var(--grad-1);
  -webkit-background-clip: text;
  background-clip: text;
  color: transparent;
  /* Bump size ~15â€“20% while staying responsive */
  font-size: clamp(18px, 5.8vw, 34px);
  vertical-align: middle;
}

/* Level badge at the top edge of the board */
.levelPill{
  position:absolute;
  top:6px;
  left:50%;
  transform: translateX(-50%);
  pointer-events:none;
  opacity:.9;
  font-size: clamp(12px, 3vw, 14px);
  padding:6px 10px;
}

/* Header 3-area grid: left controls, centered word, right actions */
.hdrGrid{
  display:grid;
  grid-template-columns: 1fr auto 1fr;
  align-items:center;
  gap:8px;
}
.hdrLeft{ justify-self:start }
.hdrCenter{ justify-self:center }
.hdrRight{ justify-self:end }

/* Game page viewport control */
body{
  overflow:hidden;
  overscroll-behavior:none;
  height:100svh; /* ensure layout fits viewport and prevents page scroll */
}
.wrap{
  padding-bottom: calc(var(--wrap-pad) + env(safe-area-inset-bottom, 0px) + 10px);
}
